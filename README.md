# Toward-Best-Practice
## 객체지향

읽기 좋은 코드는 컴퓨터 친화적인 코드와는 반대로 사람이 쉽게 읽을 수 있는 코드이다.

읽기 좋은 코드를 작성하는 가장 좋은 방법은 객체지향적으로 설계하는 것이다.

객체지향적인 설계의 핵심은 추상화이다.

**추상화**

모든 구체적인 것에 이름을 붙인다.

1. 공통된/같은 책임의 클래스/객체를 패키지로 이름 짓는다.
2. 하나의 클래스에 다른 역할을 하는 메서드를 클래스로 분리하여 이름 짓는다.
3. 하나의 메서드에 다른 역할을 하는 비즈니스 로직을 메서드로 분리하여 이름 짓는다.
4. 비즈니스 로직을 구체화하여 구현하는 메서드에는 구현 코드만 작성하여 추상화 레벨을 맞춘다.
5. 특정한 URL, 변수 값은 무슨 값을 의미하는지 분리하여 이름 짓는다.
6. 조건문에 사용되는 조건은 무슨 조건을 의미하는건지 긍정으로 이름 짓는다.

**의존성**

1. 클래스/패키지 사이에 의존성 순환이 일어나지 않도록 한다.
2. 상위 모듈이 하위 모듈을 의존하지 않도록 한다.
    1. 분리 인터페이스 패턴을 활용한다. - 인터페이스와 구현을 별개의 패키지로 구분

## **DB**

1. 쿼리에는 비즈니스 로직을 작성하지 않는다.
    1. DB서버는 비싸고 애플리케이션 서버는 상대적으로 싸다.
    2. SQL로 작성된 복잡한 비즈니스 로직은 어렵다. JAVA로 작성된 객체지향적인 비즈니스 로직 읽기 쉽다.
    3. 비즈니스 로직이 DB에 분산되어 있으면 퍼즐을 맞추듯 로직을 찾아서 끼워맞춰야 한다.

## Etc.

**DTO**

1. 클라이언트로부터 받는 요청, 클라이언트로 전송하는 응답 객체 모두 구분된 새로운 DTO 객체로 생성한다.
2. 같은 필드 값을 가진 DTO가 있어도, 해당 메서드의 책임을 이름지어 새로운 DTO 객체를 생성한다.
3. 클라이언트로 요청/응답 하는 레이어간 데이터 전송 객체인 DTO를 제외한, 데이터 객체는 record 객체로 생성한다. (Java 17 이상)

**QueryDsl**

https://www.youtube.com/watch?v=zMAX7g6rO_Y

https://www.youtube.com/watch?v=Dz-46mPfkGo

**ENUM**

상품, 등급과 같이 이름이 고정되어 있는 값들은 ENUM 클래스로 관리한다.

DB 정합성과 각 이름을 객체로 관리하여 여러 기능을 활용할 수 있다.

**트랜잭션**

CUD 작성 시 트랜잭션 관리

1. 같은 트랜잭션으로 묶어야 하는 로직은 하나의 메서드에 작성한다.
    1. 메서드 안에서 같은 클래스의 메서드 호출, 다른 클래스의 public 메서드(트랜잭션) 호출까지 하나의 트랜잭션으로 처리된다. (전파 속성이 REQUIRED일 때)
2. Controller에서 여러 개의 메서드를 호출하면 트랜잭션은 각 메서드별로 처리된다.
3. 외부 API를 호출하고, DB에 값을 저장하는 로직은 하나의 트랜잭션으로 처리한다.
    1. 이 때 순서가 중요하다. 먼저 DB에 값을 저장하고, 외부 API를 호출한다.
        
        (DB X / API O → 외부 API 요청 전 Exception 롤백, DB O / API X → 외부 API 호출 중 Exception 롤백)
        
        외부 API를 먼저 요청하면, 뒤에 DB에서 Exception이 발생해도 API 요청은 정상적으로 처리된다.
        

**예외처리**

무분별한 throws는 상위 메서드가 던지는 Exception에 혼란을 준다.

1. Exception은 구현부에서 try catch로 처리한다. (파일, 로그, 알람을 남긴다)
2. 서비스의 고유한 에러 코드를 작성하여 에러를 쉽게 파악하도록 한다.

---

## 유익한 자료

[자바/서버]

https://www.youtube.com/@madvirus

[객체지향]

https://youtu.be/dJ5C4qRqAgA?si=iI5CC5ldZXcXvtoC

https://youtu.be/26S4VFUWlJM?si=SpeFCpTf8zJVfvyj
